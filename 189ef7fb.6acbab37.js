(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{125:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/files/a-13-dd-docs-0b9c1f34cadb5b1c65ec561059dcb31a.pdf"},57:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return c})),n.d(t,"rightToc",(function(){return l})),n.d(t,"default",(function(){return d}));var a=n(2),r=n(6),o=(n(0),n(92)),i={title:"Data-Driven Documents"},c={unversionedId:"sec-a/a-13-dd-docs",id:"sec-a/a-13-dd-docs",isDocsHomePage:!1,title:"Data-Driven Documents",description:"Authors: Troy Walton, Nai Wang, Minhua Wu, Marshall Wurangian. (PDF)",source:"@site/docs\\sec-a\\a-13-dd-docs.md",slug:"/sec-a/a-13-dd-docs",permalink:"/APM-2020/docs/sec-a/a-13-dd-docs",version:"current",lastUpdatedAt:1604130541,sidebar:"docs",previous:{title:"Reducing the Number of (Derived) Attributes/Features.",permalink:"/APM-2020/docs/sec-a/a-12-reducing-features"},next:{title:"Principal Components Analysis",permalink:"/APM-2020/docs/sec-a/a-14-pca"}},l=[{value:"Lecture Summary",id:"lecture-summary",children:[]},{value:"Background",id:"background",children:[]},{value:"<code>.select()</code>",id:"select",children:[]},{value:"<code>.data()</code>",id:"data",children:[]},{value:"<code>.text()</code>",id:"text",children:[]},{value:"<code>.enter()</code> &amp; <code>.append()</code>",id:"enter--append",children:[]},{value:"<code>.exit()</code> &amp; <code>.remove()</code>",id:"exit--remove",children:[]},{value:"<code>.attr()</code> &amp; <code>.style()</code>",id:"attr--style",children:[]},{value:"D3 is composed of several components:",id:"d3-is-composed-of-several-components",children:[{value:"Here are a few examples:",id:"here-are-a-few-examples",children:[]},{value:"Grouping &amp; Normalization",id:"grouping--normalization",children:[]},{value:"Another note",id:"another-note",children:[]}]}],s={rightToc:l};function d(e){var t=e.components,i=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(a.a)({},s,i,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"Authors: Troy Walton, Nai Wang, Minhua Wu, Marshall Wurangian. (",Object(o.b)("a",{target:"_blank",href:n(125).default},"PDF"),")"),Object(o.b)("h2",{id:"lecture-summary"},"Lecture Summary"),Object(o.b)("p",null,"In this lecture, we saw a presentation from our guest speaker, Diego Garcia-Olano, about data visualization. We got to hear about D3 and see examples of visualizations using the D3 library. Our guest speaker shared some of his own work and discussed some visualization techniques. We also got to see how we could go about visualizing data ourselves whether we build from scratch using D3 or take advantage of existing visualization codes as a framework."),Object(o.b)("h2",{id:"background"},"Background"),Object(o.b)("p",null,"D3 stands for Data-Driven Documents. It is a JavaScript library that allows you to create data-driven visualizations using HTML, CSS and SVG. D3 can support large dataset for dynamic interactions. Its code can be applied and resued in a variety of modules. "),Object(o.b)("hr",null),Object(o.b)("h2",{id:"select"},Object(o.b)("inlineCode",{parentName:"h2"},".select()")),Object(o.b)("p",null,"Selecting different ",Object(o.b)("strong",{parentName:"p"},"D"),"ocument ",Object(o.b)("strong",{parentName:"p"},"O"),"bject ",Object(o.b)("strong",{parentName:"p"},"M"),"odel (DOM) elements requires the use of ",Object(o.b)("inlineCode",{parentName:"p"},".select")," and ",Object(o.b)("inlineCode",{parentName:"p"},".selectAll"),". D3 is selecting all the ",Object(o.b)("inlineCode",{parentName:"p"},"li")," elements inside of a ",Object(o.b)("inlineCode",{parentName:"p"},"ul")," tag in an HTML document. After execution, the code returns a selection object containing the ",Object(o.b)("inlineCode",{parentName:"p"},"li")," elements from the DOM."),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),'d3.select("ul").selectAll("li")\n')),Object(o.b)("p",null,'Manipulating individual nodes: Here you are selecting nodes by tag name "body".  '),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),'d3.select("body").style("background-color", "black");\n')),Object(o.b)("hr",null),Object(o.b)("h2",{id:"data"},Object(o.b)("inlineCode",{parentName:"h2"},".data()")),Object(o.b)("p",null,"You can also chain ",Object(o.b)("inlineCode",{parentName:"p"},".data()")," to the selector, then add an array to the mix: "),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),'d3.select("ul").selectAll("li").data()\n')),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),'var arr = [20, 25, 53, 59, 98];\nd3.select("ul").selectAll("li").data(arr)\nd3.select("ul").selectAll("li").data()\n')),Object(o.b)("hr",null),Object(o.b)("h2",{id:"text"},Object(o.b)("inlineCode",{parentName:"h2"},".text()")),Object(o.b)("p",null,"After data has been bound to an element, you can manipulate the elements using ",Object(o.b)("inlineCode",{parentName:"p"},".text")," with a callback function. This callback function is called with each element in the selection."),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),'var arr = [20, 25, 53, 59, 98];\n\nd3.select("ul").selectAll("li")\n  .data(arr)\n  .text(function (d) {\n    return d;\n  });\n')),Object(o.b)("hr",null),Object(o.b)("h2",{id:"enter--append"},Object(o.b)("inlineCode",{parentName:"h2"},".enter()")," & ",Object(o.b)("inlineCode",{parentName:"h2"},".append()")),Object(o.b)("p",null,"You can use ",Object(o.b)("inlineCode",{parentName:"p"},".enter()")," to create a sub-selection for data that hasn't been mapped to an element. ",Object(o.b)("inlineCode",{parentName:"p"},".append()")," will then pair an element to the sub-selection."),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),'var arr = [20, 25, 53, 59, 98]\n\n// Update existing elements \nd3.select("ul")\n  .selectAll("li")\n  .data(arr)\n  .text(function (d) {\n    return d;\n  });\n\n// Create new elements for additional points\nd3.select("ul")\n  .selectAll("li")\n  .data(arr)\n  .enter()\n  .append("li")\n  .text(function (d) {\n    return d; \n  });\n')),Object(o.b)("hr",null),Object(o.b)("h2",{id:"exit--remove"},Object(o.b)("inlineCode",{parentName:"h2"},".exit()")," & ",Object(o.b)("inlineCode",{parentName:"h2"},".remove()")),Object(o.b)("p",null,"You can remove an element: ",Object(o.b)("inlineCode",{parentName:"p"},".exit()")," will create a selection of the surplus. ",Object(o.b)("inlineCode",{parentName:"p"},".remove()")," will remove them from the DOM."),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),'var arr = [20, 25, 53, 59, 98]\nd3.select("ul")\n  .selectAll("li")\n  .data(arr)\n  .exit()\n  .remove()\n')),Object(o.b)("hr",null),Object(o.b)("h2",{id:"attr--style"},Object(o.b)("inlineCode",{parentName:"h2"},".attr()")," & ",Object(o.b)("inlineCode",{parentName:"h2"},".style()")),Object(o.b)("p",null,"Attributes and styling can be applied with ",Object(o.b)("inlineCode",{parentName:"p"},".attr()")," and ",Object(o.b)("inlineCode",{parentName:"p"},".style()"),". Here we're selecting the ",Object(o.b)("inlineCode",{parentName:"p"},"li")," elements and setting the text color to blue. Additionally, with ",Object(o.b)("inlineCode",{parentName:"p"},".attr()"),", we added a class to each ",Object(o.b)("inlineCode",{parentName:"p"},"li")," element."),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),'d3.select("ul").selectAll("li")\n  .style("color", "blue")\n  .attr("class", "myList")\n')),Object(o.b)("h2",{id:"d3-is-composed-of-several-components"},"D3 is composed of several components:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"HTML - layout of a web page"),Object(o.b)("li",{parentName:"ul"},"JavaScript - the code that you input"),Object(o.b)("li",{parentName:"ul"},"CSS (Cascading Style Sheets) - describes the presentation i.e. colors, fonts, spacing, etc."),Object(o.b)("li",{parentName:"ul"},"SVG (Scalable Vector Graphics) - web standard for geometric i.e. circles, lines, arrows"),Object(o.b)("li",{parentName:"ul"},"Your Data such as .csv file of election results, topojson for creating maps, json, tsv, etc.")),Object(o.b)("p",null,"What is great about D3 is that it is open-source with many community-developed resources. There is much space for creative freedom with D3's many features: treemap, hierarchical edge bundling, Sankey diagram, density contours, force-directed graphs, map projections, heatmaps. D3 is much more focused on composable primitives such as shapes and scales than configurable charts. It is boundless without constraints and provides application for animation and interaction with end-users."),Object(o.b)("h3",{id:"here-are-a-few-examples"},"Here are a few examples:"),Object(o.b)("h4",{id:"example-1"},"Example 1"),Object(o.b)("p",null,"Let's say you load a .csv file called data.csv which details a country's name, continent, population, GDP growth, Gross Domestic Expenditure on R&D (GERD), and GDP Growth. An incredibly well-put information regarding D3 could be found on ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://observablehq.com/@d3/learn-d3?collection=@d3/learn-d3"}),"https://observablehq.com/@d3/learn-d3?collection=@d3/learn-d3")," which details an introduction to D3, tutorials, and examples."),Object(o.b)("div",null,Object(o.b)("img",{src:"https://i.postimg.cc/4y3ZZwcj/test1.png",width:"350"})),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),'d3.csv("data.csv", function(csv) {\n    csv.sort(function(a,b) {return b.population-a.population;}); //\n    svg.selectALL("circle").data(csv).enter()\n        .append("circle")\n        .attr("cx", function(d) {return x(+d.GERD);})\n        .attr("cy", function(d) {return y(+d.growth);})\n        .attr("r", function(d) {return r(Math.sqrt(+d.population));})\n        .style("fill", function(d) {return c(d.continent);})\n        .style("opacity", function(d) {return o(+d.GDPcap);})\n        .append("title")\n        .text(function(d) {return d.country;})\n    \n})\n')),Object(o.b)("p",null,"The visualization output will be as follows:"),Object(o.b)("div",null,Object(o.b)("img",{src:"https://i.postimg.cc/0N6VgSrZ/test2.png",width:"300"})),Object(o.b)("p",null,'When you create these visualizations on html, you could double click "inspect" on the graph and see each line of code that corresponds with the visual. Furthermore, you could edit the code on "inspect".'),Object(o.b)("h4",{id:"example-2"},"Example 2"),Object(o.b)("p",null,"Let's say you make your own dataset"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),'fruits = [\n  {name: "\ud83c\udf4a", count: 21},\n  {name: "\ud83c\udf47", count: 13},\n  {name: "\ud83c\udf4f", count: 8},\n  {name: "\ud83c\udf4c", count: 5},\n  {name: "\ud83c\udf50", count: 3},\n  {name: "\ud83c\udf4b", count: 2},\n  {name: "\ud83c\udf4e", count: 1},\n  {name: "\ud83c\udf49", count: 1}\n]\n\nfruits.map(d => d.count) // the count dimension (quantitative)\nfruits.map(d => d.name) // the name dimension (nominal)\nx = f(n)\nx = d3.scaleLinear()\n    .domain([0, d3.max(fruits, d => d.count)])\n    .range([margin.left, width - margin.right])\n    .interpolate(d3.interpolateRound)\ny = f(i)\ny = d3.scaleBand()\n    .domain(fruits.map(d => d.name))\n    .range([margin.top, height - margin.bottom])\n    .padding(0.1)\n    .round(true)\n')),Object(o.b)("p",null,"The output will be as follows:"),Object(o.b)("div",null,Object(o.b)("img",{src:"https://i.postimg.cc/PfFzHJsR/test3.png",width:"500"})),Object(o.b)("p",null,"A much complicated code using the same consepts above in html follows:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-html"}),'<svg viewBox="0 ${margin.top} ${width} ${height - margin.top}" style="max-width: ${width}px; font: 10px sans-serif;">\n  <g>\n    ${fruits.map(d => svg`<rect fill="${color(d.count)}" y="${y(d.name)}" x="${x(0)}" width="${x(d.count) - x(0)}" height="${y.bandwidth()}"></rect>`)}\n  </g>\n  <g text-anchor="end" transform="translate(-6,${y.bandwidth() / 2})">\n    ${fruits.map(d => svg`<text fill="${d3.lab(color(d.count)).l < 60 ? "white" : "black"}" y="${y(d.name)}" x="${x(d.count)}" dy="0.35em">${d.count}</text>`)}\n  </g>\n  ${d3.select(svg`<g transform="translate(${margin.left},0)">`)\n    .call(d3.axisLeft(y))\n    .call(g => g.select(".domain").remove())\n    .node()}\n</svg>`\n')),Object(o.b)("p",null,"...which produces this sophisticated visual that maps count to color."),Object(o.b)("div",null,Object(o.b)("img",{src:"https://i.postimg.cc/w381BSk7/test4.png",width:"500"})),Object(o.b)("hr",null),Object(o.b)("h3",{id:"grouping--normalization"},"Grouping & Normalization"),Object(o.b)("p",null,"We talked about different visualization techniques such as grouping and normalization at the end of the class. Our group summarized of pros and cons of the techniques and thought it would be helpful to the class."),Object(o.b)("h4",{id:"grouping"},"Grouping"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Pros:"),"  Could be a good way to add dimensions to the story you\u2019re tell without using additional computing power. For example, through the COVID example during the class we learned grouping the COVID case graph of each state in its geographical position in the U.S conveys the geographical distribution of COIVD better the plain text or graphs along.\n",Object(o.b)("strong",{parentName:"p"},"Cons:")," One drawback of this approach is the assumption of people sharing the same common knowledge, let\u2019s say if the audience is not from the U.S the geographical lay out of the graphs won\u2019t add any value."),Object(o.b)("h4",{id:"normalization"},"Normalization"),Object(o.b)("p",null,"Instead of writing pros and cons for normalization, we though it is better to call it trade-off more than anything else. They key to normalization is to know the audience and to know the highlight of the message being conveyed. For example, in terms of the severity of COVID in each state, we would use the absolute number of the cases if we want to highlight the states with the most cases. On the other hand, we could use a normalized version such as infection/1000 people to give the audience a aspect that is more fair."),Object(o.b)("hr",null),Object(o.b)("h3",{id:"another-note"},"Another note"),Object(o.b)("p",null,"One thing we\u2019d also like to mention is graphs can be extremely tricky, so you might want to think through it before anything else. For example, the two graphs below actually look very different and convey totally different messages simply by omitting the base line. "),Object(o.b)("a",{href:"https://imgur.com/l1UtRHk"},Object(o.b)("img",{src:"https://i.imgur.com/l1UtRHk.png?1",title:"source: imgur.com"})),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-python"}),"")))}d.isMDXComponent=!0},92:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return m}));var a=n(0),r=n.n(a);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=r.a.createContext({}),d=function(e){var t=r.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},u=function(e){var t=d(e.components);return r.a.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},b=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,i=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),u=d(n),b=a,m=u["".concat(i,".").concat(b)]||u[b]||p[b]||o;return n?r.a.createElement(m,c(c({ref:t},s),{},{components:n})):r.a.createElement(m,c({ref:t},s))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=b;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:a,i[1]=c;for(var s=2;s<o;s++)i[s]=n[s];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"}}]);